<div class="container" style="font-size: 18px">
  <div class="d-flex">
    <div class="col-3 side-img">
      <img src="../../../assets/sidepic.png" alt="">
    </div>
    <div class="col-9">
      <h2 class="p-2">Add your prescription drugs</h2>
      <!--      <app-time-line [curentWorkStageId]="2"></app-time-line>-->
      <div class="d-flex col-5 p-2">
        <h3 style="font-size: 18px">Drug Name (Begin Typing)</h3>
      </div>
      <div class="d-flex col-3 p-2">
        <form class="example-form">
          <input type="text" class="mat-in" placeholder="Search"
                 matInput
                 (input) ="getDrugs($event)"
                 [formControl]="drugname"
                 [matAutocomplete]="auto">
          <mat-autocomplete  #auto="matAutocomplete" (optionSelected)="change($event)"
                             [displayWith]="_displayplantname">
            <mat-option *ngFor="let option of drugs" [value]="option" >
              {{option.name}}
            </mat-option>
          </mat-autocomplete>
        </form>
      </div>
      <br>
      <mat-divider></mat-divider>
      <div class="d-flex col-3 p-2">
        <button mat-raised-button color="primary" style="font-size: 15px" (click)="open()">Browse Drugs (A-Z)</button>
      </div>
<div *ngIf="itemName.length != 0">
      <div class="d-flex col-12 p-2">
        <h3>Edit the information to match your prescription.</h3>
      </div>
      <div class="p-2" >
        Selected Drug : {{itemName}}
      </div>
      <form [formGroup]="drugForm" *ngIf="itemName.length != 0" >
        <div class="d-flex">
          <div class="col-2 p-2">
            <p>Dosage</p>
            <mat-select placeholder="Select" formControlName="dosage" (selectionChange)="dosageChange($event)">
              <mat-option *ngFor="let option of dosages" [value]="option.dosage_form">
                 {{option.strength}} {{option.dosage_form}}
              </mat-option>
            </mat-select>
          </div>
          <div class="col-2 p-2" *ngIf="packages.length != 0">
            <p>Package</p>
            <mat-select placeholder="Select" formControlName="package" (selectionChange)="packageChange($event)">
              <mat-option *ngFor="let option of packages" [value]="option">
                {{option.package_description}}
              </mat-option>
            </mat-select>
          </div>
          <div class="col-2 p-2">
            <p>Quantity</p>
            <input type="number" formControlName="quantity">
          </div>
          <div class="col-2 p-2">
            <p>Frequency</p>
            <mat-select placeholder="Select" formControlName="frequency">
              <mat-option value="Every month">
                Every month
              </mat-option>
              <mat-option value="Every 2 month">
                Every 2 months
              </mat-option>
              <mat-option value="Every 3 month">
                Every 3 months
              </mat-option>
              <mat-option value="Every 6 month">
                Every 4 months
              </mat-option>
              <mat-option value="Every 12 month">
                Every 12 months
              </mat-option>
            </mat-select>
          </div>
        </div>
      </form>
      <div class="d-flex col-8 p-2  justify-content-end">
        <button mat-raised-button color="danger">Cancel</button>
        <button mat-raised-button style="background-color: #4b8bb2;color: white" class="ms-2" (click)="addDrug()">Add
          Drug
        </button>
      </div>
</div>
      <div *ngIf="rowData.length !=0" class="p-2">
        <div class="d-flex col-12 p-2">
        <h3>Your Prescriptions</h3>
      </div>
      <div class="d-flex col-12 p-2 justify-content-center">
        <ag-grid-angular style="width: 100%;margin-top: 1%;height: 100px" class="ag-theme-alpine"
                         [scrollbarWidth]="8" [headerHeight]="35"
                         rowSelection="multiple" (cellClicked)="onGridCellClicked($event)"
                         (gridReady)="onGridReady($event)"
                         [rowHeight]="35" [rowData]="rowData"
                         [columnDefs]="columnDefs" domLayout='autoHeight'
        >
        </ag-grid-angular>
      </div>
      </div>

      <div class="d-flex col-12 p-2 justify-content-end">
          <button mat-raised-button color="primary" style="font-size: 15px" (click)="navPlans()">See Plans without drugs</button>
          <button mat-raised-button style="background-color: #4b8bb2;color: white;font-size: 15px" class="ms-2" (click)="addPharmacy()">
            Continue
          </button>
      </div>
      <!--  <app-bottom-bar></app-bottom-bar>-->

    </div>
  </div>

</div>

<ng-template #generic >
  <div class="container-fluid">
<h3 style="font-size: 18px;font-weight: 500">You have selected {{itemName}}</h3>
    <p style="font-size: 15px">A lower generic is available for the drug you selected</p>
    <div class="d-flex p-2">
      <div class="d-flex col-6 p-2" style="font-size: 15px">
        <input type="radio" checked class="radio" name="radioGroup" (change)="rxcuichange(item.rxcui)" value="{{item.rxcui}}"> Keep {{itemName}}
      </div>
      <div class="d-flex col-6 p-2" style="font-size: 15px">
        <input type="radio" class="radio" name="radioGroup" value="{{item.generic.rxcui}}" (change)="rxcuichange(item.generic.rxcui)"> Use lower cost generic: {{item.generic.name}}
      </div>
    </div>
    <div class="d-flex p-2 justify-content-end">
      <button mat-raised-button class="p-2 me-2" style="font-size: 15px" (click)="cancel()">Cancel</button>
      <button mat-raised-button class="p-2" color="primary" style="font-size: 15px" (click)="cancel()">Save</button>
    </div>
  </div>
</ng-template>
