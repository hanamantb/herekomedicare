<div class="container-fluid">
  <nav aria-label="breadcrumb" style="font-size: 15px ;color: black" (click)="dashboard()">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/">Dashboard</a></li>
      <li class="breadcrumb-item active" aria-current="page">Confirmed Request</li>
    </ol>
  </nav>
  <br>
  <div class="row" style="height: 34px;">
    <div class="col-md-6" align="left">
      <!--<h1 class="display-4 page-header"><span class="screen-headings">Confirmed Request</span></h1>-->
      <p class="h">Confirmed Request</p>

    </div>
    <div class="col-md-4" align="right"  >

      <div *ngIf="selectedRequests.length > 0 && role !== 'CPXREQ' && role !== 'CPXADM' ">
      <button mat-raised-button class="approve-button" (click)="multipleApproval()" *ngIf="role !== 'CPXSPADM'" >
        <i class="fa fa-check" aria-hidden="true"></i>&nbsp;Approve &nbsp; </button>&nbsp;
        <button mat-raised-button class="reject-button"  (click)="openRejectWarning()" *ngIf="role !== 'CPXSPADM'">
          <i class="fa fa-times" aria-hidden="true"></i>&nbsp;Reject  &nbsp;</button>&nbsp;
      </div>

    </div>

    <div class="col-md-2" align="right" >
      <button mat-raised-button  class="dwnldbtn"  (click)="dwnldfilteredrequest()" >
        <mat-icon>cloud_download</mat-icon></button>&nbsp;
    </div>

  </div>
  <div class="row">
    <div class="col-md-12">
      <ag-grid-angular style="height: 390px" class="ag-theme-balham"
                       [scrollbarWidth]="8"
                       [headerHeight]="30"
                       [rowHeight]="35"
                       rowSelection="multiple"
                        (gridReady)="test($event)"
                       (cellClicked)="onGridCellClicked($event,rowData)"
                       (rowSelected)="activitySelected($event)"
                       [rowData]="rowData" [columnDefs]="columnDefs"
                       enableCellTextSelection=true>
      </ag-grid-angular>
    </div>
  </div>
  <br>
</div>

<ng-template #approveWarning>

    <div class="row">
      <div class="col-md-10">
        <p class="capex-headings-lite">Approve Request</p>
      </div>
      <div class="col-md-2" align="right">
        <button mat-dialog-close style="background-color: gray; color: white">X</button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div style="border: solid; border-radius: 10px">
          <br>
          <div class="row">
            <div class="col-md-12">
              <p class="capex-headings-lite">Do you really wish to Approve this request ?</p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <mat-form-field class="example-full-width" appearance="outline">
                &nbsp;<mat-label> Approve Remarks</mat-label>
                <input type="email" matInput  placeholder="Enter Approve Remarks "  [(ngModel)]="apprvRemarks">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12" align="center">
              <button mat-raised-button mat-dialog-close>No, Thanks</button>&nbsp;
              <button mat-raised-button style="color: white; background-color: #4caf50" mat-dialog-close (click)="approveRequest()"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;Approve</button>
              <br><br>
            </div>
          </div>
        </div>
      </div>
    </div>

</ng-template>

<ng-template #rejectWarning>

    <div class="row">
      <div class="col-md-10">
        <p class="capex-headings-lite">Reject Request</p>
      </div>
      <div class="col-md-2" align="right">
        <button mat-dialog-close style="background-color: grey; color: white">X</button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12" style="border: solid; border-radius: 10px">
        <div>
          <div class="row">
            <div class="col-md-12">
              <br>
              <p class="capex-headings-lite">You're sure about to reject selected request</p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label> Reject Reason</mat-label>
                <input type="email" matInput  placeholder="Enter Reject Reason "  [(ngModel)]="rejectReson">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12" align="center">
              <button mat-raised-button [mat-dialog-close]="false">No,Thanks</button>&nbsp;
              <button mat-raised-button color="warn" (click)="rejectMultiRequest()" mat-dialog-close [disabled]="rejectReson === '' || rejectReson === undefined"><i class="fa fa-times" aria-hidden="true"></i>&nbsp;Reject</button>
            </div>
            <br><br>
          </div>
        </div>
      </div>
    </div>

</ng-template>

<ng-template #filter>
  <div class="row">
    <h4>Filter</h4>
    <div class="row">
      <div class="col-md-6">
        <mat-label>Requester</mat-label>
        <mat-select></mat-select>
      </div>
      <div class="col-md-6">
        <mat-label>Department</mat-label>
        <mat-select></mat-select>
      </div>
      <div class="col-md-6">
        <mat-label>Investment</mat-label>
        <mat-select></mat-select>
      </div>
      <div class="col-md-6">
        <mat-label>Plant</mat-label>
        <mat-select></mat-select>
      </div>
      <div class="col-md-6">
        <mat-label>Status</mat-label>
        <mat-select></mat-select>
      </div>
      <div class="col-md-6">
        <mat-label>Payback</mat-label>
        <mat-radio-group>
          <mat-radio-button>Yes</mat-radio-button>
          <mat-radio-button>No</mat-radio-button>
        </mat-radio-group>

      </div>
    </div>
  </div>
</ng-template>

